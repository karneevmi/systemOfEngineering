# Новостной агрегатор  
*Architectural & Product Documentation*

## Contents
<img align="right" width="200" src="images/logo.png">

- [Обзор проекта](#обзор-проекта)
- [Бизнес-кейс](#бизнес-кейс)
- [Заинтересованные стороны](#заинтересованные-стороны)
- [Системные требования](#системные-требования)
  - [Функциональные требования](#функциональные-требования)
  - [Качественные характеристики](#качественные-характеристики)
  - [Ограничения](#ограничения)
- [Анализ рынка и конкурентов](#анализ-рынка-и-конкурентов)
- [Бизнес-цели и KPI](#бизнес-цели-и-kpi)
- [Контекст системы](#контекст-системы)
- [Модель предметной области](#модель-предметной-области)
- [Целевая архитектура](#целевая-архитектура)
  - [Контейнеры](#контейнеры)
  - [Ключевые компоненты](#ключевые-компоненты)
  - [Интеграции](#интеграции)
- [Ключевые сценарии (Use Cases)](#ключевые-сценарии-use-cases)
- [MVP](#mvp)
- [Технологический стек](#технологический-стек)
- [Финансовая модель](#финансовая-модель)
- [Риски проекта](#риски-проекта)
- [Roadmap](#roadmap)

---

## Обзор проекта

**Новостной агрегатор** - платформа нового поколения для сбора, обработки и персонализированной доставки новостей из различных источников (крупных и независимых СМИ).

Цель системы - предоставить пользователям **быстрый, актуальный и персонализированный доступ** к новостям с минимальной задержкой публикации.

---

## Бизнес-кейс

Современные новостные агрегаторы:
- отдают приоритет крупным СМИ;
- слабо продвигают региональные и нишевые источники;
- предоставляют ограниченную персонализацию.

**Решение**:
- поддержка малых и региональных СМИ;
- гибкая персонализация по интересам и геолокации;
- быстрый доступ к актуальным новостям из одного интерфейса.

---

## Заинтересованные стороны

| ID | Роль | Потребности |
|----|-----|------------|
| SH-1 | Читатель | Персонализированная лента, удобство |
| SH-2 | Редактор | Модерация, аналитика |
| SH-3 | Рекламодатель | Точный таргетинг |
| SH-4 | Владелец СМИ | Рост охвата, трафик |
| SH-5 | Администратор | Надёжность, безопасность |

---
## Функциональные требования

Функциональные требования определяют поведение системы и функции, которые она обязана реализовывать.

### FR-1. Управление новостной лентой
Система должна:
- формировать новостную ленту для пользователей
- обновлять ленту при появлении новых публикаций
- сортировать новости по дате публикации и релевантности

---

### FR-2. Персонализация контента
Система должна:
- учитывать интересы пользователя при формировании ленты
- поддерживать персонализацию для авторизованных пользователей
- предоставлять неперсонализированную ленту для неавторизованных пользователей

---

### FR-3. Отображение новостей
Система должна:
- отображать заголовок, краткое описание и источник новости в ленте
- отображать полный текст статьи при открытии
- поддерживать отображение изображений и медиа-контента

---

### FR-4. Управление контентом (CMS)
Система должна предоставлять редакторам возможность:
- просматривать входящие материалы
- редактировать контент перед публикацией
- публиковать и снимать материалы с публикации

---

### FR-5. Модерация контента
Система должна:
- поддерживать статусы материалов (черновик, на модерации, опубликован, отклонён)
- запрещать публикацию материалов без одобрения редактора
- вести журнал изменений контента

---

### FR-6. Управление источниками новостей
Система должна:
- позволять добавлять и удалять источники новостей
- поддерживать включение и отключение источников
- хранить метаданные источников (название, URL, тип)

---

### FR-7. Управление пользователями и ролями
Система должна:
- поддерживать регистрацию и аутентификацию пользователей
- разграничивать доступ по ролям (читатель, редактор, администратор)
- ограничивать доступ к административным функциям

---

### FR-8. Аналитика пользовательской активности
Система должна:
- собирать данные о просмотрах статей
- фиксировать клики и взаимодействия с контентом
- предоставлять агрегированную статистику в административной панели

---

### FR-9. Рекламные размещения
Система должна:
- отображать рекламные блоки в новостной ленте
- учитывать ограничения по частоте показов
- вести статистику показов и кликов

---

### FR-10. Уведомления
Система должна:
- отправлять уведомления о новых публикациях
- поддерживать настройку уведомлений пользователем
- поддерживать push и email-уведомления

---

### FR-11. Поиск по контенту
Система должна:
- обеспечивать поиск новостей по ключевым словам
- поддерживать фильтрацию по дате и источнику
- отображать релевантные результаты поиска

---

### FR-12. Логирование и аудит
Система должна:
- логировать действия пользователей с административными правами
- хранить историю изменений контента
- обеспечивать доступ к журналам аудита администраторам
---

### Качественные характеристики

| QA-ID | Атрибут | Требование |
|-----|--------|------------|
| QA-1 | Производительность | Загрузка ≤ 1 сек, SSR |
| QA-2 | Надёжность | ≥ 99.9% uptime |
| QA-3 | Масштабируемость | Горизонтальное масштабирование |
| QA-4 | Безопасность | GDPR, защита от DDoS |
| QA-5 | Удобство | Адаптивный UI |
| QA-6 | Актуальность | Задержка ≤ 15 минут |

---

### Ограничения

- **Бюджет:** 5 000 000 ₽  
- **Срок:** 5 месяцев
- **Команда:** 7 человек  
- **Frontend:** Nuxt.js 4 (SSR)

---

## Анализ рынка и конкурентов

### Ключевые решения
- Google News
- Яндекс.Новости
- Feedly
- Flipboard
- Apple News

### Отличия платформы
- поддержка малых и региональных СМИ;
- расширенный поиск по тегам и локациям;
- глубокая персонализация ленты.

---

## Бизнес-цели и KPI

### Рост
- 100 000 MAU за 7 месяцев
- 60+ источников новостей

### Монетизация
- 400 000 ₽ / месяц к концу года

### KPI MVP
- 10 000 новостей / день
- публикация ≤ 15 минут
- точность NLP ≥ 80%

---

## Контекст системы (System Context)

### Внешние системы

Система взаимодействует со следующими внешними сервисами:

- **Новостные API** (RSS / REST)  
  Используются для получения новостного контента от внешних источников.

- **Telegram API**  
  Используется для публикации новостей и отправки уведомлений пользователям.

- **Платёжные системы (Stripe)**  
  Используются для обработки платных подписок и рекламных размещений.

- **Системы аналитики (Google Analytics)**  
  Используются для сбора данных о пользовательской активности.

---

## Модель предметной области (Domain Model)

### Основные сущности

- **Профиль пользователя**  
  Хранит данные пользователя, настройки и предпочтения.

- **Новостная лента**  
  Отвечает за формирование и хранение набора новостей для отображения пользователю.

- **Источник новостей**  
  Описывает внешний источник контента и его параметры.

- **Аналитика**  
  Содержит данные о просмотрах, кликах и взаимодействиях пользователей с контентом.

---

## Целевая архитектура (Target Architecture)

Архитектура системы основана на микросервисном подходе и асинхронной обработке данных.

### Контейнеры (Containers)

Система состоит из следующих основных компонентов:

- **Frontend**  
  Веб- и мобильный клиент для взаимодействия пользователей с системой.

- **Backend API**  
  Центральный сервис, обеспечивающий бизнес-логику и взаимодействие с клиентами.

- **Сервис агрегации новостей**  
  Отвечает за получение, обработку и нормализацию новостей из внешних источников.

- **Сервис аналитики**  
  Сбор и обработка данных о пользовательской активности.

- **Сервис уведомлений**  
  Отправка push-уведомлений и сообщений в Telegram.

### Асинхронное взаимодействие

Для обработки новостей и событий используется асинхронное взаимодействие между сервисами через очередь сообщений.

---

### Ключевые компоненты

| Компонент | Назначение |
|---------|-----------|
| API Gateway | Единая точка входа |
| News Service | Сбор и обработка новостей |
| NLP Engine | Категоризация и анализ |
| Recommendation Service | Персонализация |
| Storage | PostgreSQL, Elasticsearch, Redis |

---

### Интеграции

| Система | Протокол | Формат |
|-------|---------|--------|
| Источники | Async (RabbitMQ) | JSON |
| Telegram | Webhooks | JSON |
| Stripe | REST | JSON |
| Клиенты | GraphQL | JSON |

---

## MVP

- 20 источников СМИ
- базовая NLP-категоризация
- веб-интерфейс (5 категорий)
- Telegram-бот
- админ-панель

---

## Технологический стек

- **Frontend:** Nuxt.js 4, TypeScript, SCSS
- **State:** Vuex
- **Backend:** API + микросервисы
- **DevOps:** Docker
- **Хранилища:** PostgreSQL, Elasticsearch, Redis
- **Инструменты:** ESLint, Prettier, StyleLint

---

## Финансовая модель

**Источники дохода:**
- реклама (CPM / CPC);
- подписки (freemium);
- API и white-label;
- партнёрские программы.

---
### Риски проекта

| Риск | Причина | Последствия | Меры по снижению |
|------|--------|------------|----------------|
| Техническая сложность парсера | Разные форматы источников (RSS, API, HTML) | Потеря данных, баги, задержки обновления | Асинхронные очереди, fallback, мониторинг ошибок |
| Неправильная категоризация новостей | NLP и Recommendation модели пока обучены не идеально | Низкая релевантность, недовольство пользователей | Постепенное улучшение моделей, ручная корректировка категорий |
| Высокая нагрузка | Рост числа пользователей и источников | Задержки, падение сайта, потеря данных | Горизонтальное масштабирование сервисов, кэширование, CDN |
| Безопасность | DDoS, спам, утечка данных | Нарушение работы сервиса, штрафы | Защита API, rate limiting, WAF, резервное копирование, GDPR-compliance |
| Финансовые риски | Недостаточная монетизация | Проект не окупается | Постепенная интеграция рекламы, подписок, партнёрок; регулярная аналитика KPI |
| Зависимость от внешних источников | Источник изменил API или закрыл доступ | Пропали новости, ухудшение качества ленты | Мониторинг источников, резервные источники, уведомления о сбоях |
| Задержки в разработке | Сложности интеграции, баги, болезни команды | Срыв сроков MVP | Буфер времени, agile-итерации, тестирование на ранних этапах |
| Конкуренция | Крупные агрегаторы и сервисы | Снижение пользовательской базы | Фокус на малых СМИ, уникальные фичи (геоперсонализация, UX-подсказки) |
---
## Roadmap

- [x] Анализ и проектирование
- [ ] MVP
- [ ] Масштабирование источников
- [ ] Монетизация
- [ ] B2B / API

---
